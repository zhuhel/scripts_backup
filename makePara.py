#!/usr/bin/python
#####
# Heling Zhu, Mar. 2020
#####

import sys,os
import glob
from math import sqrt
from itertools import izip

def make_para(masses=[]):
  refxs={
        #LWA"signal cross sections in pb,
        "1000w10": 	 0.024362,  
        "1000w15": 	 0.015770, 
        "1000w1": 	 0.255925, 
        "1000w5": 	 0.050040, 
        "1100w10": 	 0.023833, 
        "1100w15": 	 0.015467, 
        "1100w1": 	 0.251445, 
        "1100w5": 	 0.048930, 
        "1200w10": 	 0.016923, 
        "1200w15": 	 0.011080, 
        "1200w1": 	 0.171243, 
        "1200w5": 	 0.034289, 
        "1300w10": 	 0.017856, 
        "1300w15": 	 0.011722, 
        "1300w1": 	 0.184725, 
        "1300w5": 	 0.036167, 
        "1400w10": 	 0.013078, 
        "1400w15": 	 0.008600, 
        "1400w1": 	 0.135016, 
        "1400w5": 	 0.026510, 
        "1500w10": 	 0.013948, 
        "1500w15": 	 0.009238, 
        "1500w1": 	 0.140448, 
        "1500w5": 	 0.027963, 
        "1600w10": 	 0.010246, 
        "1600w15": 	 0.006840, 
        "1600w1": 	 0.097503, 
        "1600w5": 	 0.020254, 
        "1700w10": 	 0.012025, 
        "1700w15": 	 0.008058, 
        "1700w1": 	 0.116966, 
        "1700w5": 	 0.023784, 
        "1800w10": 	 0.008841, 
        "1800w15": 	 0.005970, 
        "1800w1": 	 0.086428, 
        "1800w5": 	 0.017370, 
        "1900w10": 	 0.011884, 
        "1900w15": 	 0.008161, 
        "1900w1": 	 0.109706, 
        "1900w5": 	 0.022819, 
        "2000w10": 	 0.008600, 
        "2000w15": 	 0.006020, 
        "2000w1": 	 0.075296, 
        "2000w5": 	 0.016080, 
        "400w10": 	 0.294449, 
        "400w15": 	 0.193440, 
        "400w1": 	 3.046016, 
        "400w5": 	 0.598735, 
        "420w10": 	 0.099779, 
        "420w15": 	 0.064890, 
        "420w1": 	 1.035151, 
        "420w5": 	 0.205419, 
        "440w10": 	 0.103914, 
        "440w15": 	 0.066966, 
        "440w1": 	 1.089907, 
        "440w5": 	 0.215510, 
        "460w10": 	 0.105321, 
        "460w15": 	 0.067462, 
        "460w1": 	 1.134045, 
        "460w5": 	 0.220261, 
        "480w10": 	 0.104388, 
        "480w15": 	 0.066690, 
        "480w1": 	 1.145645, 
        "480w5": 	 0.218455, 
        "500w10": 	 0.101504, 
        "500w15": 	 0.065028, 
        "500w1": 	 1.127290, 
        "500w5": 	 0.213284, 
        "520w10": 	 0.098484, 
        "520w15": 	 0.062672, 
        "520w1": 	 1.084503, 
        "520w5": 	 0.207189, 
        "540w10": 	 0.094022, 
        "540w15": 	 0.059869, 
        "540w1": 	 1.026132, 
        "540w5": 	 0.197255, 
        "560w10": 	 0.089286, 
        "560w15": 	 0.056864, 
        "560w1": 	 0.969808, 
        "560w5": 	 0.187168, 
        "580w10": 	 0.084453, 
        "580w15": 	 0.053778, 
        "580w1": 	 0.921465, 
        "580w5": 	 0.177138, 
        "600w10": 	 0.079609, 
        "600w15": 	 0.050680, 
        "600w1": 	 0.873222, 
        "600w5": 	 0.166965, 
        "620w10": 	 0.071791, 
        "620w15": 	 0.045731, 
        "620w1": 	 0.792937, 
        "620w5": 	 0.150472, 
        "640w10": 	 0.067267, 
        "640w15": 	 0.042885, 
        "640w1": 	 0.732830, 
        "640w5": 	 0.140845, 
        "660w10": 	 0.062914, 
        "660w15": 	 0.040142, 
        "660w1": 	 0.681757, 
        "660w5": 	 0.131527, 
        "680w10": 	 0.058769, 
        "680w15": 	 0.037526, 
        "680w1": 	 0.638181, 
        "680w5": 	 0.122783, 
        "700w10": 	 0.054816, 
        "700w15": 	 0.035050, 
        "700w1": 	 0.590878, 
        "700w5": 	 0.114238, 
        "720w10": 	 0.053005, 
        "720w15": 	 0.033901, 
        "720w1": 	 0.579834, 
        "720w5": 	 0.110649, 
        "740w10": 	 0.049465, 
        "740w15": 	 0.031643, 
        "740w1": 	 0.524432, 
        "740w5": 	 0.102999, 
        "760w10": 	 0.046140, 
        "760w15": 	 0.029518, 
        "760w1": 	 0.497489, 
        "760w5": 	 0.096246, 
        "780w10": 	 0.042997, 
        "780w15": 	 0.027518, 
        "780w1": 	 0.461768, 
        "780w5": 	 0.089546, 
        "800w10": 	 0.040115, 
        "800w15": 	 0.025640, 
        "800w1": 	 0.434256, 
        "800w5": 	 0.083731, 
        "820w10": 	 0.041157, 
        "820w15": 	 0.026417, 
        "820w1": 	 0.438576, 
        "820w5": 	 0.085294, 
        "840w10": 	 0.038258, 
        "840w15": 	 0.024568, 
        "840w1": 	 0.405166, 
        "840w5": 	 0.079304, 
        "860w10": 	 0.035580, 
        "860w15": 	 0.022855, 
        "860w1": 	 0.383545, 
        "860w5": 	 0.073880, 
        "880w10": 	 0.033072, 
        "880w15": 	 0.021261, 
        "880w1": 	 0.353049, 
        "880w5": 	 0.068515, 
        "900w10": 	 0.030743, 
        "900w15": 	 0.019780, 
        "900w1": 	 0.327583, 
        "900w5": 	 0.063683, 
        "920w10": 	 0.032487, 
        "920w15": 	 0.020904, 
        "920w1": 	 0.345565, 
        "920w5": 	 0.067345, 
        "940w10": 	 0.030238, 
        "940w15": 	 0.019477, 
        "940w1": 	 0.319149, 
        "940w5": 	 0.062513, 
        "960w10": 	 0.028141, 
        "960w15": 	 0.018149, 
        "960w1": 	 0.298834, 
        "960w5": 	 0.058104, 
        "980w10": 	 0.026197, 
        "980w15": 	 0.016915, 
        "980w1": 	 0.275359, 
        "980w5": 	 0.053983 
  }

  infile = "para_LWA.xml"
  for m in masses:
     print "Looking at => %s, xsec = %f" %(m, refxs[m])
     try:f=open(infile, "r")
     except IOError:
         print "Error:input file could not be opened! "
         sys.exit(1)

     logout=open("para_mH%s.xml"%m, 'w+')
     for line in f:
         line = line.strip()
         if 'mass' in line: 
	    oline = line.replace('mass', m)
         elif 'xsec' in line:
	    oline = line.replace('xsec', '%.6f'%(1.0/refxs[m]))
         else: oline = line
         logout.write("%s\n" %oline)
     f.close()
     logout.close()

if __name__ == '__main__':

  masses = ["400w15", "420w15", "440w15", "460w15", "480w15", "500w15", "520w15", "540w15", "560w15", "580w15", "600w15", "620w15", "640w15", "660w15", "680w15", "700w15", "720w15", "740w15", "760w15", "780w15", "800w15",  "820w15", "840w15", "860w15", "880w15", "900w15", "920w15", "940w15", "960w15", "980w15", "1000w15", "1100w15", "1200w15", "1300w15", "1400w15", "1500w15", "1600w15", "1700w15", "1800w15", "1900w15", "2000w15"]
  make_para(masses)

